<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="utf-8">
  <title>Products — QuickDeliver</title>
  <link rel="stylesheet" th:href="@{/css/style.css}">
  <style>
    .category-section { margin-bottom: 40px; }
    .category-title { font-size: 1.8em; margin-bottom: 10px; }
    .grid { display: flex; flex-wrap: wrap; gap: 20px; }
    .product-card { border: 1px solid #ccc; padding: 10px; width: 200px; text-align: center; border-radius: 8px; }
    .product-card img { width: 100%; height: 150px; object-fit: cover; border-radius: 5px; }
    .price-row { margin-top: 10px; display: flex; justify-content: space-between; align-items: center; }
    .inline-form input { width: 40px; text-align: center; }
    .inline-form button { padding: 3px 8px; }
  </style>
</head>
<body>

<main class="container">
  <h2>Available Products</h2>

  <!-- Loop through categories from controller -->
  <div th:each="category : ${categories}">
    <div class="category-section">
      <div class="category-title" th:text="${category}">Category Name</div>

      <div class="grid">
        <!-- Loop products for this category -->
        <div th:each="p : ${products}" 
             th:if="${p.category} == ${category}" 
             class="card product-card">

          <img th:src="${p.image}" th:alt="${p.name}" />
          <h3 th:text="${p.name}">Product</h3>
          <p th:text="${p.description}">Description</p>

          <div class="price-row">
            <strong>
              ₹<span th:text="${#numbers.formatDecimal(p.price, 1, 2, '.', ',')}"></span>
            </strong>
            <form th:action="@{/cart/add}" method="post" class="inline-form">
              <input type="hidden" name="productId" th:value="${p.id}" />
              <input name="qty" value="1" size="2" />
              <button type="submit">Add</button>
            </form>
          </div>

        </div>
      </div>
    </div>
  </div>

</main>

<script th:src="@{/js/app.js}"></script>
</body>
</html>
